

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dGen Code Base &mdash; dgen  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="python.agent_mutation package" href="python.agent_mutation.html" />
    <link rel="prev" title="dGen Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> dgen
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">dGen Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#agent-based-model">agent based model</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#dgen-database">dGen Database</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">dGen Code Base</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="python.agent_mutation.html">python.agent_mutation package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="python.agent_mutation.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="python.agent_mutation.html#module-python.agent_mutation.elec">python.agent_mutation.elec module</a></li>
<li class="toctree-l4"><a class="reference internal" href="python.agent_mutation.html#module-python.agent_mutation">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="python.excel.html">python.excel package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="python.excel.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="python.excel.html#module-python.excel.excel_objects">python.excel.excel_objects module</a></li>
<li class="toctree-l4"><a class="reference internal" href="python.excel.html#module-python.excel">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.config">python.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.decorators">python.decorators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.dgen_model">python.dgen_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.data_functions">python.data_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.input_data_functions">python.input_data_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.diffusion_functions_elec">python.diffusion_functions_elec module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.financial_functions">python.financial_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.settings">python.settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.tariff_functions">python.tariff_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.utility_functions">python.utility_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contribution Policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#issue-overview">Issue overview</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dgen</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>dGen Code Base</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dgen-code-base">
<h1>dGen Code Base<a class="headerlink" href="#dgen-code-base" title="Permalink to this headline">¶</a></h1>
<p>The dGen source code is located within the <code class="file docutils literal notranslate"><span class="pre">python/</span></code> directory. This page contains information
on the classes, functions, attributes, and methods used by dGen. This page is useful for debugging
errors, or examining how different elements interact incase a special run is desired.</p>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="python.agent_mutation.html">python.agent_mutation package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python.agent_mutation.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.agent_mutation.html#module-python.agent_mutation.elec">python.agent_mutation.elec module</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.agent_mutation.html#module-python.agent_mutation">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python.excel.html">python.excel package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python.excel.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.excel.html#module-python.excel.excel_objects">python.excel.excel_objects module</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.excel.html#module-python.excel">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-python.config">
<span id="python-config-module"></span><h2>python.config module<a class="headerlink" href="#module-python.config" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-python.decorators">
<span id="python-decorators-module"></span><h2>python.decorators module<a class="headerlink" href="#module-python.decorators" title="Permalink to this headline">¶</a></h2>
<p>Module of accessory decorators, mainly for logging purposes.</p>
<dl class="py class">
<dt class="sig sig-object py" id="python.decorators.fid">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.decorators.</span></span><span class="sig-name descname"><span class="pre">fid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/decorators.html#fid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.decorators.fid" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="python.decorators.fn_info">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.decorators.</span></span><span class="sig-name descname"><span class="pre">fn_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tab_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/decorators.html#fn_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.decorators.fn_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="python.decorators.fn_timer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.decorators.</span></span><span class="sig-name descname"><span class="pre">fn_timer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tab_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/decorators.html#fn_timer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.decorators.fn_timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Decorater class for profiling the run-time of functions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.decorators.shared">
<span class="sig-prename descclassname"><span class="pre">python.decorators.</span></span><span class="sig-name descname"><span class="pre">shared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/decorators.html#shared"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.decorators.shared" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.decorators.unshared">
<span class="sig-prename descclassname"><span class="pre">python.decorators.</span></span><span class="sig-name descname"><span class="pre">unshared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/decorators.html#unshared"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.decorators.unshared" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-python.dgen_model">
<span id="python-dgen-model-module"></span><h2>python.dgen_model module<a class="headerlink" href="#module-python.dgen_model" title="Permalink to this headline">¶</a></h2>
<p>Distributed Generation Market Demand Model (dGen) - Open Source Release
National Renewable Energy Lab</p>
<p>This is the main module of the dGen Model.
Running this module requires a properly installed environment with applicable scenario files.</p>
<dl class="py function">
<dt class="sig sig-object py" id="python.dgen_model.main">
<span class="sig-prename descclassname"><span class="pre">python.dgen_model.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endyear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ReEDS_inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/dgen_model.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.dgen_model.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the economic adoption of distributed generation resources on an agent-level basis.
Model output is saved to a <cite>/runs</cite> file within the dGen directory as well as in the “agent_outputs”
table within the new schema created upon each model run.</p>
</dd></dl>

</div>
<div class="section" id="module-python.data_functions">
<span id="python-data-functions-module"></span><h2>python.data_functions module<a class="headerlink" href="#module-python.data_functions" title="Permalink to this headline">¶</a></h2>
<p>Functions for pulling data</p>
<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.create_model_years">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">create_model_years</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#create_model_years"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.create_model_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of model years ranging between the specified model start year and end year that increments by 2 year time steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_year</strong> (<em>'int'</em>) – starting year of the model (e.g. 2014)</p></li>
<li><p><strong>end_year</strong> (<em>'int'</em>) – ending year of the model (e.g. 2050)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>model_years</strong> – list of model years ranging between the specified model start year and end year that increments by 2 year time steps.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘list’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.create_output_schema">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">create_output_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pg_conn_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenario_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'diffusion_template'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#create_output_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.create_output_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates output schema that will be dropped into the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pg_conn_string</strong> (<em>'string'</em>) – String to connect to pgAdmin database</p></li>
<li><p><strong>role</strong> (<em>'string'</em>) – Owner of schema</p></li>
<li><p><strong>suffix</strong> (<em>'string'</em>) – String to mark the time that model is kicked off. Added to end of schema to act as a unique indentifier</p></li>
<li><p><strong>source_schema</strong> (<em>'SQL schema'</em>) – Schema to be used as template for the output schema</p></li>
<li><p><strong>include_data</strong> (<em>'bool'</em>) – If True includes data from diffusion_shared schema. Default is False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dest_schema</strong> – Output schema that will house the final results</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘SQL schema’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.create_scenario_results_folder">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">create_scenario_results_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_scenario</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scen_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenario_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dup_n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#create_scenario_results_folder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.create_scenario_results_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates scenario results directories</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_scenario</strong> (<em>'directory'</em>) – Scenario inputs pulled from excel file within diffusion/inputs_scenarios folder</p></li>
<li><p><strong>scen_name</strong> (<em>'string'</em>) – Scenario Name</p></li>
<li><p><strong>scenario_names</strong> (<em>'list'</em>) – List of scenario names</p></li>
<li><p><strong>out_dir</strong> (<em>'directory'</em>) – Output directory for scenario subfolders</p></li>
<li><p><strong>dup_n</strong> (<em>'int'</em>) – Number to track duplicate scenarios in scenario_names. Default is 0 unless otherwise specified.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>out_scen_path</strong> (<em>‘directory’</em>) – Path for the scenario subfolders to send results</p></li>
<li><p><em>scenario_names</em> – Populated list of scenario names</p></li>
<li><p><strong>dup_n</strong> (<em>‘int’</em>) – Number to track duplicate scenarios, stepped up by 1 from original value if there is a duplicate</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.create_tech_subfolders">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">create_tech_subfolders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_scen_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">techs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_subfolders</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#create_tech_subfolders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.create_tech_subfolders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates subfolders for results of each specified technology</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out_scen_path</strong> (<em>'directory'</em>) – Path for the scenario folder to send results</p></li>
<li><p><strong>techs</strong> (<em>'string'</em>) – Technology type</p></li>
<li><p><strong>out_subfolders</strong> (<em>'dict'</em>) – Dictionary of empty subfolder paths for solar</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out_subfolders</strong> – Dictionary with subfolder paths for solar</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘dict’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.drop_output_schema">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">drop_output_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pg_conn_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_output_schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#drop_output_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.drop_output_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes output schema from database if set to true</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pg_conn_string</strong> (<em>'string'</em>) – String to connect to pgAdmin database</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema that will be deleted</p></li>
<li><p><strong>delete_output_schema</strong> (<em>'bool'</em>) – If set to True in config.py, deletes output schema</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_agent_file_scenario">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_agent_file_scenario</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_agent_file_scenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_agent_file_scenario" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_annual_inflation">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_annual_inflation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_annual_inflation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_annual_inflation" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the inflation rate set in the input sheet. Constant for all years &amp; sectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – diffusion_shared.input_main_market_inflation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df.values[0][0]</strong> – Float object that represents the inflation rate (e.g. 0.025 which corresponds to 2.5%).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘float’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_bass_params">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_bass_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_bass_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_bass_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the bass diffusion parameters to use in the model from table view in postgres.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which the sectors exist</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>bass_df</strong> – Pandas DataFrame of state abbreviation, p, q, teq_yr1 (time equivalency), sector abbreviation, and the technology.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_input_scenarios">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_input_scenarios</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_input_scenarios"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_input_scenarios" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the input scenario excel files specified in the input_scenarios directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>scenarios</strong> – a list of the input scenario excel files specified in the input_scenarios directory.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>‘list’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_itc_incentives">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_itc_incentives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_itc_incentives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_itc_incentives" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Investment Tax Credit incentives to use in the model from table view in postgres.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which the sectors exist</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>itc_options</strong> – Pandas DataFrame of ITC financial incentives.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_load_growth">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_load_growth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_load_growth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_load_growth" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rate load growth values applied to electricity load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Pandas DataFrame with year, county_id, sector_abbr, nerc_region_abbr, load_multiplier as columns.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_max_market_share">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_max_market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_max_market_share"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_max_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the max market share from database, select curve based on scenario_options,
and interpolate to tenth of a year.
Use passed parameters to determine ownership typ.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema - string - for technology i.e. diffusion_solar</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>max_market_share</strong> – Pandas DataFrame to join on main df to determine max share keys are sector &amp; payback period.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_nem_state">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_nem_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_nem_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_nem_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns net metering data for states with available data. Note, many states don’t have net metering and or
the data in diffusion_shared.nem_state_limits_2019 may be incomplete or out of date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Pandas DataFrame with net metering data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_nem_state_by_sector">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_nem_state_by_sector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_nem_state_by_sector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_nem_state_by_sector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns net metering data for states by sector with available data. Note, many states don’t have net metering and or
the data in diffusion_shared.nem_scenario_bau_2019 may be incomplete or out of date.</p>
<p>Special handling of DC: System size is unknown until bill calculator runs and differing compensation styles can
potentially result in different optimal system sizes. Here we assume only res customers (assumed system_size_kw &lt; 100)
are eligible for full retail net metering; com/ind (assumed system_size_kw &gt;= 100) only eligible for net billing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Pandas DataFrame with net metering data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_nem_utility_by_sector">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_nem_utility_by_sector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_nem_utility_by_sector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_nem_utility_by_sector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns net metering data for utility by sector with available data. Note, many utilities don’t have net metering and or
the data in diffusion_shared.nem_scenario_bau_by_utility_2019 may be incomplete or out of date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Pandas DataFrame with net metering data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_rate_escalations">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_rate_escalations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_rate_escalations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_rate_escalations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rate escalation multipliers from database. Escalations are filtered and applied in calc_economics,
resulting in an average real compounding rate growth. This rate is then used to calculate cash flows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rate_escalations</strong> – Pandas DataFrame with county_id, sector, year, escalation_factor, and source as columns.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_scenario_options">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_scenario_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cur</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pg_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_scenario_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_scenario_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull scenario options and log the user running the scenario from dB</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_sectors">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_sectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cur</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_sectors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_sectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sectors to model from table view in postgres.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cur</strong> (<em>'SQL cursor'</em>) – Cursor</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which the sectors exist</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>sectors</strong> – Dictionary of sectors to be modeled in table view in postgres</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘dict’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_selected_scenario">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_selected_scenario</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_selected_scenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_selected_scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns net metering scenario selected in the input sheet. Note, net metering data and or scenarios may
be incomplete or out of date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Pandas DataFrame with net metering data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_state_incentives">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_state_incentives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_state_incentives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_state_incentives" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the state incentives to use in the model from table view in postgres.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>state_incentives</strong> – Pandas DataFrame of state financial incentives.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_state_to_model">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_state_to_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_state_to_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_state_to_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the region to model as specified in the input sheet. Note, selecting an ISO will select the
proper geographies (counties and or states) in import_agent_file() in ‘input_data_functions.py’.
Selecting the United States (national run) will result in every state, excluding Alaska and Hawaii,
but including D.C., being returned as a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>state_to_model</strong> – List of states to model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘list’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_technologies">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_technologies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_technologies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_technologies" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the technologies to model from table view in postgres.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which the technologies exist</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>techs</strong> – List of technologies to be modeled in table view in postgres</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘list’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.get_technology_costs_solar">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">get_technology_costs_solar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#get_technology_costs_solar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.get_technology_costs_solar" title="Permalink to this definition">¶</a></dt>
<dd><p>Return technology costs for solar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – Connection</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema produced when model is run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Pandas DataFrame with year, sector_abbr, system_capex_per_kw, system_om_per_kw, system_variable_om_per_kw as columns.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.make_output_directory_path">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">make_output_directory_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#make_output_directory_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.make_output_directory_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a directory named ‘results’ with the timestamp associated with the model run appended. Note, this directory stores
metadata associated with the a model run, however, the results of the model run are in the ‘agent_outputs’ table within the
schema created with each run in the database.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.data_functions.summarize_scenario">
<span class="sig-prename descclassname"><span class="pre">python.data_functions.</span></span><span class="sig-name descname"><span class="pre">summarize_scenario</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/data_functions.html#summarize_scenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.data_functions.summarize_scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>Log high level secenario settings</p>
</dd></dl>

</div>
<div class="section" id="module-python.input_data_functions">
<span id="python-input-data-functions-module"></span><h2>python.input_data_functions module<a class="headerlink" href="#module-python.input_data_functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.deprec_schedule">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">deprec_schedule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#deprec_schedule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.deprec_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes depreciation schedule and sorts table fields by depreciation year</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>'pd.df'</em>) – Dataframe to be sorted by sector.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>output</strong> – Dataframe of depreciation schedule sorted by year</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.df_to_psql">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">df_to_psql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">owner</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_exists</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'replace'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append_transformations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#df_to_psql"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.df_to_psql" title="Permalink to this definition">¶</a></dt>
<dd><p>Uploads dataframe to database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>'pd.df'</em>) – Dataframe to upload to database</p></li>
<li><p><strong>engine</strong> (<em>'SQL table'</em>) – SQL engine to intepret SQL query</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which to upload df</p></li>
<li><p><strong>owner</strong> (<em>'string'</em>) – Owner of schema</p></li>
<li><p><strong>name</strong> (<em>'string'</em>) – Name to be given to table that is uploaded</p></li>
<li><p><strong>if_exists</strong> (<em>'replace</em><em> or </em><em>append'</em>) – If table exists and if if_exists set to replace, replaces table in database. If table exists and if if_exists set to append, appendss table in database.</p></li>
<li><p><strong>append_transformations</strong> (<em>'bool'</em>) – IDK</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Dataframe that was uploaded to database</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.get_psql_table_fields">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">get_psql_table_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#get_psql_table_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.get_psql_table_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates numpy array of columns from specified schema and table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>engine</strong> (<em>'SQL engine'</em>) – SQL engine to intepret SQL query</p></li>
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – SQL schema to pull table from</p></li>
<li><p><strong>name</strong> (<em>'string'</em>) – Name of the table from which fields are retrieved</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>numpy array</strong> – Numpy array of columns</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘np.array’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.get_scenario_settings">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">get_scenario_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">con</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#get_scenario_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.get_scenario_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates dataframe of default scenario settings from input_main_scenario_options table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which to look for the scenario settings</p></li>
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – SQL connection to connect to database</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Dataframe of default scenario settings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.get_userdefined_scenario_settings">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">get_userdefined_scenario_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">con</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#get_userdefined_scenario_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.get_userdefined_scenario_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates dataframe of user created scenario settings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>'SQL schema'</em>) – Schema in which to look for the scenario settings</p></li>
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – SQL connection to connect to database</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Dataframe of user created scenario settings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.import_agent_file">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">import_agent_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cur</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent_file_status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#import_agent_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.import_agent_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates new agents or uses pre-generated agents from provided .pkl file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scenario_settings</strong> (<em>'SQL schema'</em>) – Schema of the scenario settings</p></li>
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – SQL connection to connect to database</p></li>
<li><p><strong>cur</strong> (<em>'SQL cursor'</em>) – Cursor</p></li>
<li><p><strong>engine</strong> (<em>'SQL engine'</em>) – SQL engine to intepret SQL query</p></li>
<li><p><strong>model_settings</strong> (<em>'object'</em>) – Model settings that apply to all scenarios</p></li>
<li><p><strong>agent_file_status</strong> (<em>'attribute'</em>) – Attribute that describes whether to use pre-generated agent file or create new</p></li>
<li><p><strong>input_name</strong> (<em>'string'</em>) – .Pkl file name substring of pre-generated agent table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>solar_agents</strong> – Instance of Agents class with either user pre-generated or new data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘Class’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.import_table">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">import_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csv_import_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#import_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.import_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports table from csv given the name of the csv</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scenario_settings</strong> (<em>'SQL schema'</em>) – Schema in which to look for the scenario settings</p></li>
<li><p><strong>con</strong> (<em>'SQL connection'</em>) – SQL connection to connect to database</p></li>
<li><p><strong>engine</strong> (<em>'SQL engine'</em>) – SQL engine to intepret SQL query</p></li>
<li><p><strong>role</strong> (<em>'string'</em>) – Owner of schema</p></li>
<li><p><strong>input_name</strong> (<em>'string'</em>) – Name of the csv file that should be imported</p></li>
<li><p><strong>csv_import_function</strong> (<em>'function'</em>) – Specific function to import and munge csv</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – Dataframe of the table that was imported</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.melt_year">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">melt_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#melt_year"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.melt_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function to melt dataframe’s columns of years and parameter values to the row axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>parameter</em>) – Name of the parameter value in dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>function</strong> – Function that melts years and parameter value to row axis</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘function’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.process_elec_price_trajectories">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">process_elec_price_trajectories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elec_price_traj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#process_elec_price_trajectories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.process_elec_price_trajectories" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the trajectory of the change in electricity prices over time with 2018 as the base year</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>elec_price_traj</strong> (<em>'pd.df'</em>) – Dataframe of electricity prices by year and ReEDS BA</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>elec_price_change_traj</strong> – Dataframe of annual electricity price change factors from base year</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.process_load_growth">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">process_load_growth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load_growth</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#process_load_growth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.process_load_growth" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the trajectory of the load growth rates over time relative to a base year of 2014</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>load_growth</strong> (<em>'pd.df'</em>) – Dataframe of annual load growth rates</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>load_growth_change_traj</strong> – Dataframe of annual load growth rates relative to base year</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.process_wholesale_elec_prices">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">process_wholesale_elec_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wholesale_elec_price_traj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#process_wholesale_elec_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.process_wholesale_elec_prices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the trajectory of the change in wholesale electricity prices over time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wholesale_elec_price_traj</strong> (<em>'pd.df'</em>) – Dataframe of wholesale electricity prices by year and ReEDS BA</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>wholesale_elec_price_change_traj</strong> – Dataframe of annual electricity price change factors from base year</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.input_data_functions.stacked_sectors">
<span class="sig-prename descclassname"><span class="pre">python.input_data_functions.</span></span><span class="sig-name descname"><span class="pre">stacked_sectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/input_data_functions.html#stacked_sectors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.input_data_functions.stacked_sectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes dataframe and sorts table fields by sector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>'pd.df'</em>) – Dataframe to be sorted by sector.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>output</strong> – Dataframe of the table that was imported and split by sector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-python.diffusion_functions_elec">
<span id="python-diffusion-functions-elec-module"></span><h2>python.diffusion_functions_elec module<a class="headerlink" href="#module-python.diffusion_functions_elec" title="Permalink to this headline">¶</a></h2>
<p>Name: diffusion_functions
Purpose: Contains functions to calculate diffusion of distributed wind model</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Determine maximum market size as a function of payback time;</p></li>
<li><p>Parameterize Bass diffusion curve with diffusion rates (p, q) set by payback time;</p></li>
<li><p>Determine current stage (equivaluent time) of diffusion based on existing market and current economics</p></li>
<li><p>Calculate new market share by stepping forward on diffusion curve.</p></li>
</ol>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.bass_diffusion">
<span class="sig-prename descclassname"><span class="pre">python.diffusion_functions_elec.</span></span><span class="sig-name descname"><span class="pre">bass_diffusion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/diffusion_functions_elec.html#bass_diffusion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.diffusion_functions_elec.bass_diffusion" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fraction of population that diffuse into the max_market_share.
Note that this is different than the fraction of population that will
adopt, which is the max market share</p>
<dl class="simple">
<dt>IN: p,q - numpy arrays - Bass diffusion parameters</dt><dd><p>t - numpy array - Number of years since diffusion began</p>
</dd>
<dt>OUT: new_adopt_fraction - numpy array - fraction of overall population</dt><dd><p>that will adopt the technology</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.calc_diffusion">
<span class="sig-prename descclassname"><span class="pre">python.diffusion_functions_elec.</span></span><span class="sig-name descname"><span class="pre">calc_diffusion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cur</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">techs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">choose_tech</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sectors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_first_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bass_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_p_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_q_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_teq_yr1_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/diffusion_functions_elec.html#calc_diffusion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.diffusion_functions_elec.calc_diffusion" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fraction of overall population that have adopted the technology in the current period.
:param df:</p>
<blockquote>
<div><dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.payback_period">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">payback_period</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.payback_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Payback period in years.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.max_market_share">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">max_market_share</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.max_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum market share as decimal percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.current_market_share">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">current_market_share</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.current_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Current market share as decimal percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>is_first_year</strong> (<em>bool</em>) – If <cite>True</cite>, the new equivalent time (<cite>teq2</cite>) is equal to the original <cite>teq_yr1</cite> plus the increment defined in <cite>teq</cite>.
Otherwise, <cite>teq2</cite> is equal to <cite>teq</cite> plus 2 years.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The fraction of overall population that have adopted the technology</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>This does not specify the actual new adoption fraction without knowing adoption in the previous period.</p></li>
<li><p>The relative economic attractiveness controls the p, q value in the Bass diffusion model.</p></li>
<li><p>The current assumption is that only payback and MBS are being used, that pp is bounded [0-30] and MBS is bounded [0-120].</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.calc_diffusion_market_share">
<span class="sig-prename descclassname"><span class="pre">python.diffusion_functions_elec.</span></span><span class="sig-name descname"><span class="pre">calc_diffusion_market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_first_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/diffusion_functions_elec.html#calc_diffusion_market_share"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.diffusion_functions_elec.calc_diffusion_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fraction of overall population that have adopted (diffused into
the max market share) the technology in the current period. Note that this does
not specify the actual new adoption fraction without knowing adoption in the previous period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.p">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">p</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.p" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion parameter defining the coeffieicent of innovation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.q">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">q</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.q" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion parameter definint the coefficient of imitation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.t">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.t" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of years since the diffusion model began.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input dataframe with <cite>new_adopt_fraction</cite> column added. <cite>new_adopt_fraction</cite> represents the proportion of the overall population that will adopt the technology.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is different than the fraction of population that will adopt, which is the max market share.y</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.calc_diffusion_solar">
<span class="sig-prename descclassname"><span class="pre">python.diffusion_functions_elec.</span></span><span class="sig-name descname"><span class="pre">calc_diffusion_solar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_first_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bass_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_p_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_q_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_teq_yr1_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/diffusion_functions_elec.html#calc_diffusion_solar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.diffusion_functions_elec.calc_diffusion_solar" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the market share (ms) added in the solve year. Market share must be less
than max market share (mms) except initial ms is greater than the calculated mms.
For this circumstance, no diffusion allowed until mms &gt; ms. Also, do not allow ms to
decrease if economics deterioriate. Using the calculated
market share, relevant quantities are updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input dataframe.</p></li>
<li><p><strong>is_first_year</strong> (<em>bool</em>) – Passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">diffusion_functions.calc_diffusion_market_share()</span></code> to determine the increment of <cite>teq</cite></p></li>
<li><p><strong>bass_params</strong> (<em>pandas.DataFrame</em>) – DataFrame generally derived from <code class="xref py py-func docutils literal notranslate"><span class="pre">settings.get_bass_params()</span></code>, includes the following attributes: <cite>control_reg_id</cite>, <cite>country_abbr</cite>, <cite>sector_abbr</cite>, <cite>state_id</cite>, <cite>p</cite>, <cite>q</cite>, <cite>teq_yr1</cite>, <cite>tech</cite>.</p></li>
<li><p><strong>override_p_values</strong> (<em>float</em><em> , </em><em>optional</em>) – Value to override bass diffusion <cite>p</cite> coefficient of innovation with.</p></li>
<li><p><strong>overide_q_values</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to override bass diffusion <cite>q</cite> coefficient of immitation with.</p></li>
<li><p><strong>override_teq_yr1_value</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to override bass diffusion <cite>teq_yr1</cite> value representing the number of years since diffusion began for the first year of observation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe contains <cite>market_last_year</cite> column to inform diffusion in next year.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.calc_equiv_time">
<span class="sig-prename descclassname"><span class="pre">python.diffusion_functions_elec.</span></span><span class="sig-name descname"><span class="pre">calc_equiv_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/diffusion_functions_elec.html#calc_equiv_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.diffusion_functions_elec.calc_equiv_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the “equivalent time” on the diffusion curve. This defines the
gradient of adoption.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.msly">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">msly</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.msly" title="Permalink to this definition">¶</a></dt>
<dd><p>Market share last year [at end of the previous solve] as decimal</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.df.mms">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">mms</span></span><a class="headerlink" href="#python.diffusion_functions_elec.df.mms" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum market share as a decimal percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">p</span></span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion parameter defining the coefficient of innovation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-prename descclassname"><span class="pre">df.</span></span><span class="sig-name descname"><span class="pre">q</span></span><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion paramter defining the coefficient of imitation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input dataframe with <cite>teq</cite> column added. <cite>teq</cite> is the equivalent number of years after diffusion started on the diffusion curve</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.diffusion_functions_elec.set_bass_param">
<span class="sig-prename descclassname"><span class="pre">python.diffusion_functions_elec.</span></span><span class="sig-name descname"><span class="pre">set_bass_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bass_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_p_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_q_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_teq_yr1_value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/diffusion_functions_elec.html#set_bass_param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.diffusion_functions_elec.set_bass_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the p &amp; q parameters which define the Bass diffusion curve.
p is the coefficient of innovation, external influence or advertising effect.
q is the coefficient of imitation, internal influence or word-of-mouth effect.</p>
<blockquote>
<div><p>IN: scaled_metric_value - numpy array - scaled value of economic attractiveness [0-1]
OUT: p,q - numpy arrays - Bass diffusion parameters</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-python.financial_functions">
<span id="python-financial-functions-module"></span><h2>python.financial_functions module<a class="headerlink" href="#module-python.financial_functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.calc_financial_performance">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">calc_financial_performance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataframe</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#calc_financial_performance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.calc_financial_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the payback period and join it on the agent dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataframe</strong> (<em>&quot;pd.df&quot;</em>) – Agent dataframe</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>- dataframe</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’ - Agent dataframe with payback period joined on dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.calc_max_market_share">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">calc_max_market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_market_share_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#calc_max_market_share"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.calc_max_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the maximum marketshare available for each agent.
:param dataframe:</p>
<blockquote>
<div><dl class="py attribute">
<dt class="sig sig-object py" id="python.financial_functions.metric_value">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">metric_value</span></span><a class="headerlink" href="#python.financial_functions.metric_value" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_market_share_df</strong> (<em>pandas.DataFrame</em>) – Set by <code class="xref py py-meth docutils literal notranslate"><span class="pre">settings.ScenarioSettings.get_max_marketshare()</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input DataFrame with <cite>max_market_share</cite> and <cite>metric</cite> columns joined on.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.calc_payback_vectorized">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">calc_payback_vectorized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tech_lifetime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#calc_payback_vectorized"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.calc_payback_vectorized" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the payback period in years for a given cash flow. Payback is defined as the first year where cumulative cash flows are positive.
Cash flows that do not result in payback are given a period of 30.1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfs</strong> (<em>&quot;numpy.ndarray&quot;</em>) – Annual cash flows of investment, where 0th index refers to 0th year of investment</p></li>
<li><p><strong>tech_lifetime</strong> (<em>&quot;numpy.ndarray&quot;</em>) – Number of years to assume for technology lifetime</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pp_final</strong> – Payback period in years</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘numpy.ndarray’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.calc_system_performance">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">calc_system_performance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utilityrate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">costs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_switch_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">en_batt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batt_simple_dispatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#calc_system_performance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.calc_system_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes Battwatts, Utilityrate5, and Cashloan PySAM modules with system sizes (kw) as input</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kw</strong> (<em>Capacity</em><em> (</em><em>in kW</em><em>)</em>) – </p></li>
<li><p><strong>pv</strong> (<em>Dictionary with generation_hourly and consumption_hourly</em>) – </p></li>
<li><p><strong>utilityrate</strong> (<em>PySAM Utilityrate5 module</em>) – </p></li>
<li><p><strong>loan</strong> (<em>PySAM Cashloan module</em>) – </p></li>
<li><p><strong>batt</strong> (<em>PySAM Battwatts module</em>) – </p></li>
<li><p><strong>costs</strong> (<em>Dictionary with system costs</em>) – </p></li>
<li><p><strong>agent</strong> (<em>pd.Series with agent attirbutes</em>) – </p></li>
<li><p><strong>rate_switch_table</strong> (<em>pd.DataFrame with details on how rates will switch with DG/storage adoption</em>) – </p></li>
<li><p><strong>en_batt</strong> (<em>Enable battery</em>) – </p></li>
<li><p><strong>batt_simple_dispatch</strong> (<em>batt.Battery.batt_simple_dispatch</em>) – <ul>
<li><p>batt_simple_dispatch = 0 (peak shaving look ahead)</p></li>
<li><p>batt_simple_dispatch = 1 (peak shaving look behind)</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>-loan.Outputs.npv</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>the negative net present value of system + storage to be optimized for system sizing</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.calc_system_size_and_performance">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">calc_system_size_and_performance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sectors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_switch_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#calc_system_size_and_performance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.calc_system_size_and_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the optimal system and battery size and generation profile, and resulting bill savings and financial metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent</strong> (<em>'pd.df'</em>) – individual agent object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>agent</strong> – Adds several features to the agent dataframe:</p>
<ul class="simple">
<li><p>agent_id</p></li>
<li><p>system_kw - system capacity selected by agent</p></li>
<li><p>batt_kw - battery capacity selected by agent</p></li>
<li><p>batt_kwh - battery energy capacity</p></li>
<li><p>npv - net present value of system + storage</p></li>
<li><p>cash_flow  - array of annual cash flows from system adoption</p></li>
<li><p>batt_dispatch_profile - array of hourly battery dispatch</p></li>
<li><p>annual_energy_production_kwh - annual energy production (kwh) of system</p></li>
<li><p>naep - normalized annual energy production (kwh/kW) of system</p></li>
<li><p>capacity_factor - annual capacity factor</p></li>
<li><p>first_year_elec_bill_with_system - first year electricity bill with adopted system ($/yr)</p></li>
<li><p>first_year_elec_bill_savings - first year electricity bill savings with adopted system ($/yr)</p></li>
<li><p>first_year_elec_bill_savings_frac - fraction of savings on electricity bill in first year of system adoption</p></li>
<li><p>max_system_kw - maximum system size allowed as constrained by roof size or not exceeding annual consumption</p></li>
<li><p>first_year_elec_bill_without_system - first year electricity bill without adopted system ($/yr)</p></li>
<li><p>avg_elec_price_cents_per_kwh - first year electricity price (c/kwh)</p></li>
<li><p>cbi - ndarray of capacity-based incentives applicable to agent</p></li>
<li><p>ibi - ndarray of investment-based incentives applicable to agent</p></li>
<li><p>pbi - ndarray of performance-based incentives applicable to agent</p></li>
<li><p>cash_incentives - ndarray of cash-based incentives applicable to agent</p></li>
<li><p>export_tariff_result - summary of structure of retail tariff applied to agent</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.check_incentive_constraints">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">check_incentive_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">incentive_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incentive_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_cost</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#check_incentive_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.check_incentive_constraints" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.check_minmax">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">check_minmax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#check_minmax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.check_minmax" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.eqn_builder">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">eqn_builder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incentive_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#eqn_builder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.eqn_builder" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.eqn_flat_rate">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">eqn_flat_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">incentive_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#eqn_flat_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.eqn_flat_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.eqn_linear_decay_to_zero">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">eqn_linear_decay_to_zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">incentive_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#eqn_linear_decay_to_zero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.eqn_linear_decay_to_zero" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.get_expiration">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">get_expiration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timesteps_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#get_expiration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.get_expiration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.process_incentives">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">process_incentives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batt_kw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batt_kwh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_hourly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#process_incentives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.process_incentives" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.financial_functions.process_tariff">
<span class="sig-prename descclassname"><span class="pre">python.financial_functions.</span></span><span class="sig-name descname"><span class="pre">process_tariff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">utilityrate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tariff_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_billing_sell_rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/financial_functions.html#process_tariff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.financial_functions.process_tariff" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate the utilityrate5 PySAM model and process the agent’s rate json object to conform with PySAM input formatting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent</strong> (<em>'pd.Series'</em>) – Individual agent object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>utilityrate</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘PySAM.Utilityrate5’</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-python.settings">
<span id="python-settings-module"></span><h2>python.settings module<a class="headerlink" href="#module-python.settings" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="python.settings.ModelSettings">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.settings.</span></span><span class="sig-name descname"><span class="pre">ModelSettings</span></span><a class="reference internal" href="_modules/python/settings.html#ModelSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class containing the model settings parameters
.. attribute:: model_init</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.cdate">
<span class="sig-name descname"><span class="pre">cdate</span></span><a class="headerlink" href="#python.settings.ModelSettings.cdate" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.out_dir">
<span class="sig-name descname"><span class="pre">out_dir</span></span><a class="headerlink" href="#python.settings.ModelSettings.out_dir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.input_agent_dir">
<span class="sig-name descname"><span class="pre">input_agent_dir</span></span><a class="headerlink" href="#python.settings.ModelSettings.input_agent_dir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.input_data_dir">
<span class="sig-name descname"><span class="pre">input_data_dir</span></span><a class="headerlink" href="#python.settings.ModelSettings.input_data_dir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.start_year">
<span class="sig-name descname"><span class="pre">start_year</span></span><a class="headerlink" href="#python.settings.ModelSettings.start_year" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.input_scenarios">
<span class="sig-name descname"><span class="pre">input_scenarios</span></span><a class="headerlink" href="#python.settings.ModelSettings.input_scenarios" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_params_file">
<span class="sig-name descname"><span class="pre">pg_params_file</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_params_file" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#python.settings.ModelSettings.role" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_params">
<span class="sig-name descname"><span class="pre">pg_params</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_params" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_engine_params">
<span class="sig-name descname"><span class="pre">pg_engine_params</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_engine_params" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_conn_string">
<span class="sig-name descname"><span class="pre">pg_conn_string</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_conn_string" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_engine_string">
<span class="sig-name descname"><span class="pre">pg_engine_string</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_engine_string" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_params_log">
<span class="sig-name descname"><span class="pre">pg_params_log</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_params_log" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.model_path">
<span class="sig-name descname"><span class="pre">model_path</span></span><a class="headerlink" href="#python.settings.ModelSettings.model_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.local_cores">
<span class="sig-name descname"><span class="pre">local_cores</span></span><a class="headerlink" href="#python.settings.ModelSettings.local_cores" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.pg_procs">
<span class="sig-name descname"><span class="pre">pg_procs</span></span><a class="headerlink" href="#python.settings.ModelSettings.pg_procs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.delete_output_schema">
<span class="sig-name descname"><span class="pre">delete_output_schema</span></span><a class="headerlink" href="#python.settings.ModelSettings.delete_output_schema" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.settings.ModelSettings.dynamic_system_sizing">
<span class="sig-name descname"><span class="pre">dynamic_system_sizing</span></span><a class="headerlink" href="#python.settings.ModelSettings.dynamic_system_sizing" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ModelSettings.add_config">
<span class="sig-name descname"><span class="pre">add_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ModelSettings.add_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings.add_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ModelSettings.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ModelSettings.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ModelSettings.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ModelSettings.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ModelSettings.set_pg_params">
<span class="sig-name descname"><span class="pre">set_pg_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pg_params_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ModelSettings.set_pg_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings.set_pg_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ModelSettings.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ModelSettings.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ModelSettings.validate_property">
<span class="sig-name descname"><span class="pre">validate_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">property_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ModelSettings.validate_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ModelSettings.validate_property" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.settings.</span></span><span class="sig-name descname"><span class="pre">ScenarioSettings</span></span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Storage of all scenario specific inputs</p>
<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings.add_scenario_options">
<span class="sig-name descname"><span class="pre">add_scenario_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings.add_scenario_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings.add_scenario_options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings.set_tech_mode">
<span class="sig-name descname"><span class="pre">set_tech_mode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings.set_tech_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings.set_tech_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.settings.ScenarioSettings.validate_property">
<span class="sig-name descname"><span class="pre">validate_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">property_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#ScenarioSettings.validate_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.ScenarioSettings.validate_property" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.settings.check_type">
<span class="sig-prename descclassname"><span class="pre">python.settings.</span></span><span class="sig-name descname"><span class="pre">check_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#check_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.check_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.settings.init_model_settings">
<span class="sig-prename descclassname"><span class="pre">python.settings.</span></span><span class="sig-name descname"><span class="pre">init_model_settings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#init_model_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.init_model_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>initialize Model Settings object (this controls settings that apply to all scenarios to be executed)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.settings.init_scenario_settings">
<span class="sig-prename descclassname"><span class="pre">python.settings.</span></span><span class="sig-name descname"><span class="pre">init_scenario_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">con</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cur</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/settings.html#init_scenario_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.settings.init_scenario_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>load scenario specific data and configure output settings</p>
</dd></dl>

</div>
<div class="section" id="module-python.tariff_functions">
<span id="python-tariff-functions-module"></span><h2>python.tariff_functions module<a class="headerlink" href="#module-python.tariff_functions" title="Permalink to this headline">¶</a></h2>
<p>Deprecated. Nullified by new PySAM code and will be taken out in Beta release.</p>
<dl class="py class">
<dt class="sig sig-object py" id="python.tariff_functions.Export_Tariff">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">Export_Tariff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_retail_nem</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([[0.0]])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([[0.0]])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_8760</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">...,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_tou_n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Export_Tariff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Export_Tariff" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Structure of compensation for exported generation. Currently only two
styles: full-retail NEM, and instantanous TOU energy value.</p>
<dl class="py method">
<dt class="sig sig-object py" id="python.tariff_functions.Export_Tariff.set_constant_sell_price">
<span class="sig-name descname"><span class="pre">set_constant_sell_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">price</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Export_Tariff.set_constant_sell_price"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Export_Tariff.set_constant_sell_price" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="python.tariff_functions.Tariff">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">Tariff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">urdb_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_file_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Tariff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Tariff" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="simple">
<dt>Tariff Attributes:</dt><dd><p>urdb_id: id for utility rate database. US, not international.
eia_id: The EIA assigned ID number for the utility associated with this tariff
name: tariff name
utility: Name of utility this tariff is associated with
fixed_charge: Fixed monthly charge in $/mo.
peak_kW_capacity_max: The annual maximum kW of demand that a customer can have and still be on this tariff
peak_kW_capacity_min: The annula minimum kW of demand that a customer can have and still be on this tariff
kWh_useage_max: The maximum kWh of average monthly consumption that a customer can have and still be on this tariff
kWh_useage_min: The minimum kWh of average monthly consumption that a customer can have and still be on this tariff
sector: residential, commercial, or industrial
comments: comments from the urdb
description: tariff description from urdb
source: uri for the source of the tariff
uri: link the the urdb page
voltage_category: secondary, primary, transmission
d_flat_exists: Boolean of whether there is a flat (not tou) demand charge component. Flat demand is also called monthly or seasonal demand.
d_flat_n: Number of unique flat demand period constructions. Does NOT correspond to width of d_flat_x constructs.
d_flat_prices: The prices of each tier/period combination for flat demand. Rows are tiers, columns are months. Differs from TOU, where columns are periods.
d_flat_levels: The limit (total kW) of each of each tier/period combination for flat demand. Rows are tiers, columns are months. Differs from TOU, where columns are periods.
d_tou_exists = Boolean of whether there is a tou (not flat) demand charge component
d_tou_n = Number of unique tou demand periods. Minimum of 1, since I’m counting no-charge periods still as a period.
d_tou_prices = The prices of each tier/period combination for tou demand. Rows are tiers, columns are periods.
d_tou_levels = The limit (total kW) of each of each tier/period combination for tou demand. Rows are tiers, columns are periods.
e_exists = Boolean of whether there is a flat (not tou) demand charge component
e_tou_exists = Boolean of whether there is a flat (not tou) demand charge component
e_n = Number of unique energy periods. Minimum of 1, since I’m counting no-charge periods still as a period.
e_prices = The prices of each tier/period combination for flat demand. Rows are tiers, columns are periods.
e_levels = The limit (total kWh) of each of each tier/period combination for energy. Rows are tiers, columns are periods.
e_wkday_12by24: 12 by 24 period definition for weekday energy. Rows are months, columns are hours.
e_wkend_12by24: 12 by 24 period definition for weekend energy. Rows are months, columns are hours.
d_wkday_12by24: 12 by 24 period definition for weekday energy. Rows are months, columns are hours.
d_wkend_12by24: 12 by 24 period definition for weekend energy. Rows are months, columns are hours.
d_tou_8760
e_tou_8760
e_prices_no_tier
e_max_difference: The maximum energy price differential within any single day
energy_rate_unit: kWh or kWh/day - for guiding the bill calculations later
demand_rate_unit: kW or kW/day - for guiding the bill calculations later</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="python.tariff_functions.Tariff.define_d_flat">
<span class="sig-name descname"><span class="pre">define_d_flat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d_flat_levels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_flat_prices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Tariff.define_d_flat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Tariff.define_d_flat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.tariff_functions.Tariff.define_d_tou">
<span class="sig-name descname"><span class="pre">define_d_tou</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d_wkday_12by24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_wkend_12by24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_tou_levels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_tou_prices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Tariff.define_d_tou"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Tariff.define_d_tou" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.tariff_functions.Tariff.define_e">
<span class="sig-name descname"><span class="pre">define_e</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e_wkday_12by24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e_wkend_12by24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e_levels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e_prices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Tariff.define_e"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Tariff.define_e" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.tariff_functions.Tariff.identify_max_demand_charge">
<span class="sig-name descname"><span class="pre">identify_max_demand_charge</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Tariff.identify_max_demand_charge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Tariff.identify_max_demand_charge" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="python.tariff_functions.Tariff.write_json">
<span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#Tariff.write_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.Tariff.write_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.bill_calculator">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">bill_calculator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load_profile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tariff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_tariff</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#bill_calculator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.bill_calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated. Nullified by new PySAM code but kept for reference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load_profile</strong> (<em>8760 profile of agent</em>) – </p></li>
<li><p><strong>tariff</strong> (<a class="reference internal" href="#python.tariff_functions.Tariff" title="python.tariff_functions.Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Tariff</span></code></a>) – Tariff class object</p></li>
<li><p><strong>export_tariff</strong> (<a class="reference internal" href="#python.tariff_functions.Export_Tariff" title="python.tariff_functions.Export_Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Export_Tariff</span></code></a>) – Export tariff class object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.build_8760_from_12by24s">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">build_8760_from_12by24s</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wkday_12by24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wkend_12by24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#build_8760_from_12by24s"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.build_8760_from_12by24s" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct long-df (8760) from a weekday and weekend 12by24</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wkday_12by24</strong> (<em>numpy.ndarray</em>) – </p></li>
<li><p><strong>wkend_12by24</strong> (<em>numpy.ndarray</em>) – </p></li>
<li><p><strong>start_day</strong> (<em>int</em>) – Start day of 6 (default) equates to a Sunday.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.design_tariff_for_portfolio">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">design_tariff_for_portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avg_rev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peak_hour_indicies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summer_month_indicies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rev_f_d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rev_f_e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rev_f_fixed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#design_tariff_for_portfolio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.design_tariff_for_portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a tariff that would extract a given $/kWh from a portfolio of
customers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_df</strong> (<em>'pd.DataFrame'</em>) – <p>agents as loaded from the agent pkl file.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="python.tariff_functions.agent_df.load_profile">
<span class="sig-prename descclassname"><span class="pre">agent_df.</span></span><span class="sig-name descname"><span class="pre">load_profile</span></span><a class="headerlink" href="#python.tariff_functions.agent_df.load_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="python.tariff_functions.agent_df.weight">
<span class="sig-prename descclassname"><span class="pre">agent_df.</span></span><span class="sig-name descname"><span class="pre">weight</span></span><a class="headerlink" href="#python.tariff_functions.agent_df.weight" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p></li>
<li><p><strong>avg_rev</strong> (<em>'float'</em>) – $/kWh that the tariff would extract from the given portfolio of customers.</p></li>
<li><p><strong>peak_hour_indicies</strong> (<em>'list'</em>) – list of indices corresponding to the peak demand hours. Assumes peak hours are the same between
demand and energy.</p></li>
<li><p><strong>summer_month_indicies</strong> (<em>'list'</em>) – list of indices corresponding to the summer peak demand hours. Assumes peak hours only occur during the summer.</p></li>
<li><p><strong>rev_f_d</strong> (<em>'list'</em>) – revenue strucutre for demand charges. Format is [fraction of total revenue, fraction that
comes from tou charges, fraction that comes from flat charges] ex: [0.4875, 0.5, 0.5].</p></li>
<li><p><strong>rev_f_e</strong> (<em>'list'</em>) – revenue strucutre for energy charges. Format is [fraction of total revenue, fraction that
comes from off-peak hours, fraction that comes from on-peak hours] ex: [0.4875, 0.20, 0.8].</p></li>
<li><p><strong>rev_f_fixed</strong> (<em>'list'</em>) – [fraction of revenue from fixed monthly charges]. ex: [0.025].</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Peak hours are the same between demand and energy.</p></li>
<li><p>Peak hours only occur during the summer.</p></li>
</ol>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>tarrif</strong> – Returns tarrif, an object instantiated with the Tarrif class.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>‘class object’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.download_tariffs_from_urdb">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">download_tariffs_from_urdb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utility</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#download_tariffs_from_urdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.download_tariffs_from_urdb" title="Permalink to this definition">¶</a></dt>
<dd><p>API request for URDB rates.
Each user should get their own URDB API key: <a class="reference external" href="http://en.openei.org/services/api/signup/">http://en.openei.org/services/api/signup/</a>
Sectors: Residential, Commercial, Industrial, Lighting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>api_key</strong> (<em>str</em>) – Each user should get their own URDB API key: <a class="reference external" href="http://en.openei.org/services/api/signup/">http://en.openei.org/services/api/signup/</a></p></li>
<li><p><strong>sector</strong> (<em>str</em>) – One of Residential, Commercial, Industrial, Lighting</p></li>
<li><p><strong>utility</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe of URDB rates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.filter_tariff_df">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">filter_tariff_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tariff_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyword_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyword_list_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demand_units_to_exclude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['hp',</span> <span class="pre">'kVA',</span> <span class="pre">'kW</span> <span class="pre">daily',</span> <span class="pre">'hp</span> <span class="pre">daily',</span> <span class="pre">'kVA</span> <span class="pre">daily']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_expired</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#filter_tariff_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.filter_tariff_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter tariffs based on inclusion (e.g. keywords), or exclusion (e.g. demand units)
:param tariff_df: dataframe of URDB tariffs created by <a class="reference internal" href="#python.tariff_functions.download_tariffs_from_urdb" title="python.tariff_functions.download_tariffs_from_urdb"><code class="xref py py-func docutils literal notranslate"><span class="pre">download_tariffs_from_urdb()</span></code></a>.
:type tariff_df: pandas.DataFrame
:param keyword_list: list of keywords to search for in rate structure.
:type keyword_list: list of str, optional
:param keyword_list_file: filepath to .txt file containing keywords to search for.
:type keyword_list_file: str
:param demand_units_to_exclude: exclude rates from URDB database if the units are contained in this list. Default values are <cite>hp</cite>,`kVA`,`kW daily`,`hp daily`,`kVA daily`
:type demand_units_to_exclude: list of str
:param remove_expired: exclude expired rates. Default is <cite>True</cite>.
:type remove_expired: bool</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.load_config_params">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">load_config_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#load_config_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.load_config_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Each user should fill in a config_template.json file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.tariff_functions.tiered_calc_vec">
<span class="sig-prename descclassname"><span class="pre">python.tariff_functions.</span></span><span class="sig-name descname"><span class="pre">tiered_calc_vec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/tariff_functions.html#tiered_calc_vec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.tariff_functions.tiered_calc_vec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-python.utility_functions">
<span id="python-utility-functions-module"></span><h2>python.utility_functions module<a class="headerlink" href="#module-python.utility_functions" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="python.utility_functions.Timer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">Timer</span></span><a class="reference internal" href="_modules/python/utility_functions.html#Timer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.Timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.code_profiler">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">code_profiler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#code_profiler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.code_profiler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.current_datetime">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">current_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%Y_%m_%d_%Hh%Mm%Ss'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#current_datetime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.current_datetime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.get_epoch_time">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">get_epoch_time</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#get_epoch_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.get_epoch_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.get_formatted_time">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">get_formatted_time</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#get_formatted_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.get_formatted_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.get_logger">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">get_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#get_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes depreciation schedule and sorts table fields by depreciation year</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_file_path</strong> (<em>'str'</em>) – The log_file_path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>logger</strong> – logger object for logging</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘loggin.logger’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.get_pg_engine_params">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">get_pg_engine_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#get_pg_engine_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.get_pg_engine_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.get_pg_params">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">get_pg_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#get_pg_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.get_pg_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the path to the json file specifying database connection information and returns formatted information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> (<em>'str'</em>) – The path to the json file specifying database connection information.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pg_params</strong> (<em>‘json’</em>) – ‘postgres database connection parameters’</p></li>
<li><p><strong>pg_conn_str</strong> (<em>‘str’</em>) – Formatted connection string</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.make_con">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">make_con</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">async_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#make_con"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.make_con" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the psql connection and cursor objects to be used with functions that query from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_string</strong> (<em>'SQL connection'</em>) – Connection string. e.g. “postgresql+psycopg2://postgres:postgres&#64;127.0.0.1:5432/dgen_db”.</p></li>
<li><p><strong>role</strong> (<em>'str'</em>) – Database role. ‘postgres’ should be the default role name for the open source codebase.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>con</strong> (<em>‘SQL connection’</em>) – Postgres Database Connection.</p></li>
<li><p><strong>cur</strong> (<em>‘SQL cursor’</em>) – Postgres Database Cursor.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.make_engine">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">make_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pg_engine_con</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#make_engine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.make_engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.parse_command_args">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">parse_command_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#parse_command_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.parse_command_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to parse the command line arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> (<em>'str'</em>) – -h : help ‘dg_model.py -i &lt;Initiate Model?&gt; -y &lt;year&gt;’
-i : Initiate model for 2010 and quit
-y: or year= : Resume model solve in passed year</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>init_model - ‘bool’</em> – Initialize the model</p></li>
<li><p><strong>resume_year</strong> (<em>‘float’</em>) – The year the model should resume.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.pylist_2_pglist">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">pylist_2_pglist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#pylist_2_pglist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.pylist_2_pglist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.shutdown_log">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">shutdown_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#shutdown_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.shutdown_log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="python.utility_functions.wait">
<span class="sig-prename descclassname"><span class="pre">python.utility_functions.</span></span><span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/python/utility_functions.html#wait"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python.utility_functions.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-python">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-python" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="python.agent_mutation.html" class="btn btn-neutral float-right" title="python.agent_mutation package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral float-left" title="dGen Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, NREL

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>